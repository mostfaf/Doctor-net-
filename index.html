<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
</script>
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="دكتور نت - أدوات احترافية لإعدادات MikroTik RouterOS">
  <meta name="author" content="مصطفى عاطف الشوري">
  <title>دكتور نت - أدوات مايكروتك</title>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" as="style" onload="this.rel='stylesheet'">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap');

    * {
      transition: all .2s ease-in-out;
      box-sizing: border-box;
      font-family: 'Cairo', sans-serif;
      margin: 0;
      padding: 0;
    }

    body {
      color: #333;
      min-height: 100vh;
      font-size: 16px;
      background: linear-gradient(135deg, #004aad, #0073e6);
      line-height: 1.6;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px;
    }

    #wrap {
      max-width: 900px;
      width: 100%;
      padding: 0 15px;
    }

    .logo-img {
      width: 150px;
      height: 150px;
      object-fit: cover;
      border-radius: 50%;
      display: block;
      margin: 20px auto;
      border: 8px solid #fff;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .main-wrap {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin: 20px 0;
      align-items: center;
    }

    .content {
      width: 100%;
      max-width: 700px;
      padding: 20px;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    }

    label {
      font-size: 16px;
      color: #333;
      margin-bottom: 8px;
      display: block;
    }

    select, input[type="text"], textarea {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 15px;
      background: #f9f9f9;
    }

    button {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      background-color: #004aad;
      color: white;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #003087;
    }

    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }

    .add-btn, .remove-btn {
      padding: 10px 20px;
      margin: 10px 5px;
      border-radius: 6px;
      cursor: pointer;
      color: #fff;
    }

    .add-btn {
      background-color: #28a745;
    }

    .add-btn:hover {
      background-color: #218838;
    }

    .remove-btn {
      background-color: #dc3545;
    }

    .remove-btn:hover {
      background-color: #c82333;
    }

    #answer-text {
      height: 250px;
      padding: 12px;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 14px;
      resize: none;
      direction: ltr;
      background: #f9f9f9;
    }

    #answer {
      display: none;
      margin-top: 20px;
    }

    #error {
      color: #dc3545;
      font-size: 14px;
      margin: 10px 0;
      display: none;
      text-align: center;
    }

    .disclaimer {
      font-size: 14px;
      color: #fff;
      text-align: center;
      margin: 20px 0;
      opacity: 0.9;
    }

    .input-group {
      border: 1px dashed #ccc;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 8px;
    }

    .warning-message {
      background-color: #f8d7da;
      color: #721c24;
      padding: 15px;
      border-radius: 8px;
      font-size: 14px;
      margin-bottom: 20px;
      text-align: center;
      border: 1px solid #f5c6cb;
    }

    .footer {
      text-align: center;
      margin: 30px 0;
      font-size: 14px;
      color: #fff;
    }

    @media (max-width: 768px) {
      body {
        padding: 10px;
      }

      .logo-img {
        width: 120px;
        height: 120px;
      }

      .content {
        padding: 15px;
      }

      select, input[type="text"], button, #answer-text {
        font-size: 14px;
        padding: 10px;
      }

      button {
        padding: 12px;
      }
    }

    @media (max-width: 480px) {
      .logo-img {
        width: 100px;
        height: 100px;
      }

      .content {
        padding: 10px;
      }

      select, input[type="text"], button, #answer-text {
        font-size: 13px;
      }
    }
  </style>
</head>
<body>
  <div id="wrap">
    <div class="header">
      <div class="logo">
        <a href="#">
          <img src="https://i.imgur.com/0PBLMuU.jpeg" alt="دكتور نت" class="logo-img" loading="lazy">
        </a>
      </div>
    </div>

    <div class="main-wrap">
      <div class="content">
        <div class="warning-message">دكتور نت غير مسؤول عن أي أضرار ناتجة عن الاستخدام الخاطئ لهذه الأدوات. تأكد من التحقق من السكربتات قبل التطبيق.</div>
        <label for="tool">اختر الأداة:</label>
        <select id="tool">
          <option value="simple-queue">مولد Simple Queue</option>
          <option value="queue-tree">مولد Queue Tree</option>
          <option value="pcq">مولد PCQ</option>
          <option value="load-balancing-pcc">موازنة الحمل PCC</option>
          <option value="load-balancing-ecmp">موازنة الحمل ECMP</option>
          <option value="load-balancing-nth">موازنة الحمل NTH</option>
          <option value="vpn-pptp">نفق VPN PPTP</option>
          <option value="vpn-l2tp">نفق VPN L2TP</option>
          <option value="vpn-openvpn">نفق VPN OpenVPN</option>
          <option value="firewall-basic">جدار حماية أساسي</option>
          <option value="firewall-advanced">جدار حماية متقدم</option>
          <option value="firewall-block-social">حظر وسائل التواصل</option>
          <option value="netwatch">Netwatch</option>
          <option value="dhcp-server">خادم DHCP</option>
          <option value="dns-doh">DNS over HTTPS (DoH)</option>
          <option value="dns-dot">DNS over TLS (DoT)</option>
          <option value="hotspot-setup">إعداد Hotspot</option>
          <option value="hotspot-qr">Hotspot تسجيل QR Code</option>
          <option value="wireless-optimization">تحسين الواي فاي</option>
          <option value="capsman">إعداد CAPsMAN</option>
          <option value="static-routing">توجيه ثابت</option>
          <option value="ospf">إعداد OSPF</option>
          <option value="ipsec">إعداد IPsec</option>
          <option value="pppoe-server">خادم PPPoE</option>
          <option value="pppoe-client">عميل PPPoE</option>
          <option value="vrrp">إعداد VRRP</option>
          <option value="traffic-monitor">مراقبة الحركة</option>
          <option value="port-knocking">Port Knocking</option>
          <option value="ipv6-addressing">عناوين IPv6</option>
          <option value="dhcpv6">خادم DHCPv6</option>
          <option value="scheduled-script">سكربت مجدول</option>
          <option value="backup-script">سكربت النسخ الاحتياطي</option>
          <option value="general">سؤال عام</option>
        </select>
        <div id="inputs"></div>
        <button id="submit">إنشاء السكربت</button>
        <p id="error"></p>
        <div id="answer">
          <textarea id="answer-text" readonly></textarea>
          <button id="copy">نسخ السكربت</button>
        </div>
      </div>
    </div>
    <div class="disclaimer">تم تطوير هذا الموقع بواسطة مصطفى عاطف الشوري لدعم مجتمع MikroTik.</div>
    <div class="footer"><p>جميع الحقوق محفوظة لـ <span class="brand-name">دكتور نت</span> © 2025</p></div>
  </div>

  <script>
    // قاعدة بيانات محلية موسعة للسكربتات مع تعليقات تحتوي على اسم المطور
    const toolsDatabase = {
      'simple-queue': {
        description: 'مولد Simple Queue لتحديد سرعة العملاء',
        inputs: [
          { id: 'ip', label: 'عنوان IP', placeholder: '192.168.1.2' },
          { id: 'speed', label: 'السرعة (تحميل/رفع)', placeholder: '2M/2M' },
          { id: 'name', label: 'اسم العميل', placeholder: 'client1' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# Simple Queue Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/queue simple\n';
          entries.forEach((params, index) => {
            const ip = params.ip || `192.168.1.${index + 2}`;
            const speed = params.speed || '2M/2M';
            const name = params.name || `client${index + 1}`;
            script += `# Add queue for client: ${name}\n`;
            script += `add max-limit=${speed} name=${name} target=${ip}/32 comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'queue-tree': {
        description: 'مولد Queue Tree لإدارة النطاق الترددي',
        inputs: [
          { id: 'name', label: 'اسم Queue', placeholder: 'queue1' },
          { id: 'limit', label: 'الحد الأقصى', placeholder: '10M' },
          { id: 'parent', label: 'الأصل', placeholder: 'global' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# Queue Tree Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/queue tree\n';
          entries.forEach((params, index) => {
            const name = params.name || `queue${index + 1}`;
            const limit = params.limit || '10M';
            const parent = params.parent || 'global';
            script += `# Add queue tree: ${name}\n`;
            script += `add name=${name} parent=${parent} max-limit=${limit} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'pcq': {
        description: 'مولد PCQ لتوزيع النطاق الترددي بالتساوي',
        inputs: [
          { id: 'name', label: 'اسم PCQ', placeholder: 'pcq1' },
          { id: 'rate', label: 'السرعة لكل مستخدم', placeholder: '1M' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# PCQ Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/queue type\n';
          entries.forEach((params, index) => {
            const name = params.name || `pcq${index + 1}`;
            const rate = params.rate || '1M';
            script += `# Add PCQ type: ${name}\n`;
            script += `add kind=pcq name=${name} pcq-rate=${rate} comment="Generated by Dr. Net"\n`;
          });
          script += '/queue tree\n';
          entries.forEach((params, index) => {
            const name = params.name || `pcq${index + 1}`;
            script += `# Add queue tree for PCQ: ${name}\n`;
            script += `add name=${name} parent=global queue=${name} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'load-balancing-pcc': {
        description: 'موازنة الحمل PCC لتوزيع الحمل مع واجهة خروج واحدة',
        inputs: [
          { id: 'lanInterface', label: 'واجهة LAN', placeholder: 'ether2' },
          { id: 'wanIp', label: 'عنوان IP لـ WAN', placeholder: '192.168.1.2' },
          { id: 'wanGw', label: 'بوابة WAN', placeholder: '192.168.1.1' },
          { id: 'wanInterface', label: 'واجهة WAN', placeholder: 'ether1' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# PCC Load Balancing Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '# Configured for single LAN interface with multiple WANs\n';
          
          // Enable connection tracking
          script += '/system resource\n';
          script += 'set universal-access=yes\n';
          
          // Extract LAN interface (assuming it's the same for all entries)
          const lanInterface = entries[0].lanInterface || 'ether2';
          
          // Configure IP addresses for WAN interfaces
          script += '/ip address\n';
          entries.forEach((params, index) => {
            const wanIp = params.wanIp || `192.168.${index + 1}.2`;
            const wanInterface = params.wanInterface || `ether${index + 1}`;
            script += `# Add IP address for WAN${index + 1}\n`;
            script += `add address=${wanIp}/24 interface=${wanInterface} comment="WAN${index + 1} - Dr. Net"\n`;
          });
          
          // Configure default routes with distance
          script += '/ip route\n';
          entries.forEach((params, index) => {
            const wanGw = params.wanGw || `192.168.${index + 1}.1`;
            const wanInterface = params.wanInterface || `ether${index + 1}`;
            script += `# Add route for WAN${index + 1}\n`;
            script += `add dst-address=0.0.0.0/0 gateway=${wanGw} distance=${index + 1} check-gateway=ping comment="WAN${index + 1} - Dr. Net"\n`;
          });
          
          // Configure mangle rules for PCC
          script += '/ip firewall mangle\n';
          entries.forEach((params, index) => {
            const wanInterface = params.wanInterface || `ether${index + 1}`;
            script += `# Mark connections for WAN${index + 1}\n`;
            script += `add chain=prerouting dst-address-type=!local in-interface=${lanInterface} per-connection-classifier=both-addresses:${entries.length}/${index} action=mark-connection new-connection-mark=wan${index + 1}_conn passthrough=yes comment="WAN${index + 1} PCC - Dr. Net"\n`;
            script += `# Mark routing for WAN${index + 1}\n`;
            script += `add chain=prerouting connection-mark=wan${index + 1}_conn in-interface=${lanInterface} action=mark-routing new-routing-mark=to_wan${index + 1} passthrough=yes comment="WAN${index + 1} Routing - Dr. Net"\n`;
          });
          
          // Configure NAT rules
          script += '/ip firewall nat\n';
          entries.forEach((params, index) => {
            const wanInterface = params.wanInterface || `ether${index + 1}`;
            script += `# Masquerade for WAN${index + 1}\n`;
            script += `add chain=srcnat out-interface=${wanInterface} action=masquerade comment="WAN${index + 1} NAT - Dr. Net"\n`;
          });
          
          return script;
        }
      },
      'load-balancing-ecmp': {
        description: 'موازنة الحمل ECMP لتوزيع الحمل مع واجهة خروج واحدة',
        inputs: [
          { id: 'lanInterface', label: 'واجهة LAN', placeholder: 'ether2' },
          { id: 'wanIp', label: 'عنوان IP لـ WAN', placeholder: '192.168.1.2' },
          { id: 'wanGw', label: 'بوابة WAN', placeholder: '192.168.1.1' },
          { id: 'wanInterface', label: 'واجهة WAN', placeholder: 'ether1' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# ECMP Load Balancing Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '# Configured for single LAN interface with multiple WANs\n';
          
          // Enable connection tracking
          script += '/system resource\n';
          script += 'set universal-access=yes\n';
          
          // Extract LAN interface (assuming it's the same for all entries)
          const lanInterface = entries[0].lanInterface || 'ether2';
          
          // Configure IP addresses for WAN interfaces
          script += '/ip address\n';
          entries.forEach((params, index) => {
            const wanIp = params.wanIp || `192.168.${index + 1}.2`;
            const wanInterface = params.wanInterface || `ether${index + 1}`;
            script += `# Add IP address for WAN${index + 1}\n`;
            script += `add address=${wanIp}/24 interface=${wanInterface} comment="WAN${index + 1} - Dr. Net"\n`;
          });
          
          // Configure default routes with equal distance
          script += '/ip route\n';
          entries.forEach((params, index) => {
            const wanGw = params.wanGw || `192.168.${index + 1}.1`;
            const wanInterface = params.wanInterface || `ether${index + 1}`;
            script += `# Add route for WAN${index + 1}\n`;
            script += `add dst-address=0.0.0.0/0 gateway=${wanGw} distance=1 check-gateway=ping comment="WAN${index + 1} - Dr. Net"\n`;
          });
          
          // Configure NAT rules
          script += '/ip firewall nat\n';
          entries.forEach((params, index) => {
            const wanInterface = params.wanInterface || `ether${index + 1}`;
            script += `# Masquerade for WAN${index + 1}\n`;
            script += `add chain=srcnat out-interface=${wanInterface} action=masquerade comment="WAN${index + 1} NAT - Dr. Net"\n`;
          });
          
          return script;
        }
      },
      'load-balancing-nth': {
        description: 'موازنة الحمل NTH لتوزيع الحمل مع واجهة خروج واحدة',
        inputs: [
          { id: 'lanInterface', label: 'واجهة LAN', placeholder: 'ether2' },
          { id: 'wanIp', label: 'عنوان IP لـ WAN', placeholder: '192.168.1.2' },
          { id: 'wanGw', label: 'بوابة WAN', placeholder: '192.168.1.1' },
          { id: 'wanInterface', label: 'واجهة WAN', placeholder: 'ether1' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# NTH Load Balancing Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '# Configured for single LAN interface with multiple WANs\n';
          
          // Enable connection tracking
          script += '/system resource\n';
          script += 'set universal-access=yes\n';
          
          // Extract LAN interface (assuming it's the same for all entries)
          const lanInterface = entries[0].lanInterface || 'ether2';
          
          // Configure IP addresses for WAN interfaces
          script += '/ip address\n';
          entries.forEach((params, index) => {
            const wanIp = params.wanIp || `192.168.${index + 1}.2`;
            const wanInterface = params.wanInterface || `ether${index + 1}`;
            script += `# Add IP address for WAN${index + 1}\n`;
            script += `add address=${wanIp}/24 interface=${wanInterface} comment="WAN${index + 1} - Dr. Net"\n`;
          });
          
          // Configure mangle rules for NTH
          script += '/ip firewall mangle\n';
          entries.forEach((params, index) => {
            const wanInterface = params.wanInterface || `ether${index + 1}`;
            script += `# Mark routing for WAN${index + 1}\n`;
            script += `add chain=prerouting dst-address-type=!local in-interface=${lanInterface} nth=${entries.length},${index} action=mark-routing new-routing-mark=to_wan${index + 1} passthrough=yes comment="WAN${index + 1} NTH - Dr. Net"\n`;
          });
          
          // Configure routes with routing marks
          script += '/ip route\n';
          entries.forEach((params, index) => {
            const wanGw = params.wanGw || `192.168.${index + 1}.1`;
            script += `# Add route for WAN${index + 1}\n`;
            script += `add dst-address=0.0.0.0/0 gateway=${wanGw} routing-mark=to_wan${index + 1} distance=1 check-gateway=ping comment="WAN${index + 1} - Dr. Net"\n`;
          });
          
          // Add default route for unmarked traffic
          script += `# Default route for unmarked traffic\n`;
          script += `add dst-address=0.0.0.0/0 gateway=${entries[0].wanGw || '192.168.1.1'} distance=1 check-gateway=ping comment="Default Route - Dr. Net"\n`;
          
          // Configure NAT rules
          script += '/ip firewall nat\n';
          entries.forEach((params, index) => {
            const wanInterface = params.wanInterface || `ether${index + 1}`;
            script += `# Masquerade for WAN${index + 1}\n`;
            script += `add chain=srcnat out-interface=${wanInterface} action=masquerade comment="WAN${index + 1} NAT - Dr. Net"\n`;
          });
          
          return script;
        }
      },
      'vpn-pptp': {
        description: 'إعداد نفق VPN PPTP',
        inputs: [
          { id: 'server', label: 'عنوان الخادم', placeholder: 'vpn.server.com' },
          { id: 'user', label: 'اسم المستخدم', placeholder: 'vpnuser' },
          { id: 'pass', label: 'كلمة المرور', placeholder: 'vpnpass' },
          { id: 'interface', label: 'اسم الواجهة', placeholder: 'pptp-out1' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# PPTP VPN Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/interface pptp-client\n';
          entries.forEach((params, index) => {
            const server = params.server || 'vpn.server.com';
            const user = params.user || `vpnuser${index + 1}`;
            const pass = params.pass || 'vpnpass';
            const interface = params.interface || `pptp-out${index + 1}`;
            script += `# Add PPTP client: ${interface}\n`;
            script += `add connect-to=${server} user=${user} password=${pass} name=${interface} comment="Generated by Dr. Net"\n`;
          });
          script += '/ip route\n';
          entries.forEach((params, index) => {
            const interface = params.interface || `pptp-out${index + 1}`;
            script += `# Add route for PPTP: ${interface}\n`;
            script += `add dst-address=0.0.0.0/0 gateway=${interface} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'vpn-l2tp': {
        description: 'إعداد نفق VPN L2TP',
        inputs: [
          { id: 'server', label: 'عنوان الخادم', placeholder: 'vpn.server.com' },
          { id: 'user', label: 'اسم المستخدم', placeholder: 'vpnuser' },
          { id: 'pass', label: 'كلمة المرور', placeholder: 'vpnpass' },
          { id: 'interface', label: 'اسم الواجهة', placeholder: 'l2tp-out1' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# L2TP VPN Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/interface l2tp-client\n';
          entries.forEach((params, index) => {
            const server = params.server || 'vpn.server.com';
            const user = params.user || `vpnuser${index + 1}`;
            const pass = params.pass || 'vpnpass';
            const interface = params.interface || `l2tp-out${index + 1}`;
            script += `# Add L2TP client: ${interface}\n`;
            script += `add connect-to=${server} user=${user} password=${pass} name=${interface} comment="Generated by Dr. Net"\n`;
          });
          script += '/ip route\n';
          entries.forEach((params, index) => {
            const interface = params.interface || `l2tp-out${index + 1}`;
            script += `# Add route for L2TP: ${interface}\n`;
            script += `add dst-address=0.0.0.0/0 gateway=${interface} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'vpn-openvpn': {
        description: 'إعداد نفق VPN OpenVPN',
        inputs: [
          { id: 'server', label: 'عنوان الخادم', placeholder: 'vpn.server.com' },
          { id: 'port', label: 'المنفذ', placeholder: '1194' },
          { id: 'user', label: 'اسم المستخدم', placeholder: 'vpnuser' },
          { id: 'pass', label: 'كلمة المرور', placeholder: 'vpnpass' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# OpenVPN Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/interface ovpn-client\n';
          entries.forEach((params, index) => {
            const server = params.server || 'vpn.server.com';
            const port = params.port || '1194';
            const user = params.user || `vpnuser${index + 1}`;
            const pass = params.pass || 'vpnpass';
            script += `# Add OpenVPN client: ovpn${index + 1}\n`;
            script += `add connect-to=${server} port=${port} user=${user} password=${pass} name=ovpn${index + 1} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'firewall-basic': {
        description: 'جدار حماية أساسي لتأمين الراوتر',
        inputs: [],
        script: function() {
          let script = '# Basic Firewall Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/ip firewall filter\n';
          script += '# Allow ICMP\n';
          script += 'add action=accept chain=input protocol=icmp comment="Allow ICMP - Dr. Net"\n';
          script += '# Allow established and related connections\n';
          script += 'add action=accept chain=input connection-state=established,related comment="Allow Established - Dr. Net"\n';
          script += '# Drop all other input traffic\n';
          script += 'add action=drop chain=input comment="Drop all else - Dr. Net"\n';
          return script;
        }
      },
      'firewall-advanced': {
        description: 'جدار حماية متقدم مع حماية إضافية',
        inputs: [
          { id: 'port', label: 'المنفذ', placeholder: '80' },
          { id: 'protocol', label: 'البروتوكول', placeholder: 'tcp' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# Advanced Firewall Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/ip firewall filter\n';
          entries.forEach((params, index) => {
            const port = params.port || '80';
            const protocol = params.protocol || 'tcp';
            script += `# Allow ${protocol} port ${port}\n`;
            script += `add action=accept chain=input protocol=${protocol} dst-port=${port} comment="Allow ${protocol} port ${port} - Dr. Net"\n`;
          });
          script += '# Drop all other input traffic\n';
          script += `add action=drop chain=input comment="Drop all else - Dr. Net"\n`;
          return script;
        }
      },
      'firewall-block-social': {
        description: 'حظر وسائل التواصل الاجتماعي',
        inputs: [
          { id: 'site', label: 'الموقع (مثل YouTube)', placeholder: 'YouTube' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# Social Media Block Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/ip firewall filter\n';
          entries.forEach((params, index) => {
            const site = params.site || `site${index + 1}`;
            script += `# Block ${site}\n`;
            script += `add action=drop chain=forward dst-address-list="Mikrotik-${site}" comment="Block ${site} - Dr. Net"\n`;
          });
          script += '/ip firewall address-list\n';
          entries.forEach(() => {
            script += `# Add local IP range\n`;
            script += `add address=192.168.0.0/16 list=LOCAL-IP comment="LOCAL IP - Dr. Net"\n`;
          });
          return script;
        }
      },
      'netwatch': {
        description: 'Netwatch لمراقبة الاتصال',
        inputs: [
          { id: 'host', label: 'عنوان المضيف', placeholder: '8.8.8.8' },
          { id: 'upScript', label: 'سكربت Up', placeholder: '/system script run up-script' },
          { id: 'downScript', label: 'سكربت Down', placeholder: '/system script run down-script' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# Netwatch Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/tool netwatch\n';
          entries.forEach((params, index) => {
            const host = params.host || `8.8.8.${index + 8}`;
            const upScript = params.upScript || '/system script run up-script';
            const downScript = params.downScript || '/system script run down-script';
            script += `# Add Netwatch for host: ${host}\n`;
            script += `add host=${host} interval=10s up-script="${upScript}" down-script="${downScript}" comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'dhcp-server': {
        description: 'إعداد خادم DHCP',
        inputs: [
          { id: 'interface', label: 'الواجهة', placeholder: 'ether2' },
          { id: 'gateway', label: 'البوابة', placeholder: '192.168.1.1' },
          { id: 'pool', label: 'نطاق IP', placeholder: '192.168.1.2-192.168.1.254' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# DHCP Server Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/ip pool\n';
          entries.forEach((params, index) => {
            const pool = params.pool || `192.168.${index + 1}.2-192.168.${index + 1}.254`;
            script += `# Add IP pool: dhcp_pool${index + 1}\n`;
            script += `add name=dhcp_pool${index + 1} ranges=${pool} comment="Generated by Dr. Net"\n`;
          });
          script += '/ip dhcp-server\n';
          entries.forEach((params, index) => {
            const interface = params.interface || `ether${index + 2}`;
            script += `# Add DHCP server: dhcp${index + 1}\n`;
            script += `add name=dhcp${index + 1} interface=${interface} address-pool=dhcp_pool${index + 1} comment="Generated by Dr. Net"\n`;
          });
          script += '/ip dhcp-server network\n';
          entries.forEach((params, index) => {
            const gateway = params.gateway || `192.168.${index + 1}.1`;
            script += `# Add DHCP network configuration\n`;
            script += `add address=192.168.${index + 1}.0/24 gateway=${gateway} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'dns-doh': {
        description: 'إعداد DNS over HTTPS (DoH)',
        inputs: [
          { id: 'dohServer', label: 'خادم DoH', placeholder: 'dns.google' }
        ],
        repeatable: false,
        script: function(params) {
          const dohServer = params.dohServer || 'dns.google';
          let script = '# DNS over HTTPS (DoH) Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/ip dns\n';
          script += `# Configure DoH server: ${dohServer}\n`;
          script += `set allow-remote-requests=yes use-doh-server=https://${dohServer}/dns-query verify-doh-cert=yes comment="Generated by Dr. Net"\n`;
          return script;
        }
      },
      'dns-dot': {
        description: 'إعداد DNS over TLS (DoT)',
        inputs: [
          { id: 'dotServer', label: 'خادم DoT', placeholder: '1.1.1.1' }
        ],
        repeatable: false,
        script: function(params) {
          const dotServer = params.dotServer || '1.1.1.1';
          let script = '# DNS over TLS (DoT) Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/ip dns\n';
          script += `# Configure DoT server: ${dotServer}\n`;
          script += `set servers=${dotServer} use-dot=yes comment="Generated by Dr. Net"\n`;
          return script;
        }
      },
      'hotspot-setup': {
        description: 'إعداد Hotspot بسيط',
        inputs: [
          { id: 'interface', label: 'واجهة Hotspot', placeholder: 'wlan1' },
          { id: 'user', label: 'اسم المستخدم', placeholder: 'user1' },
          { id: 'pass', label: 'كلمة المرور', placeholder: 'pass123' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# Hotspot Setup Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/ip hotspot\n';
          entries.forEach((params, index) => {
            const interface = params.interface || `wlan${index + 1}`;
            script += `# Add Hotspot: hotspot${index + 1}\n`;
            script += `add name=hotspot${index + 1} interface=${interface} comment="Generated by Dr. Net"\n`;
          });
          script += '/ip hotspot user\n';
          entries.forEach((params, index) => {
            const user = params.user || `user${index + 1}`;
            const pass = params.pass || 'pass123';
            script += `# Add Hotspot user: ${user}\n`;
            script += `add name=${user} password=${pass} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'hotspot-qr': {
        description: 'إعداد تسجيل Hotspot باستخدام QR Code',
        inputs: [
          { id: 'ssid', label: 'اسم SSID', placeholder: 'MyHotspot' },
          { id: 'password', label: 'كلمة المرور', placeholder: 'pass123' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# Hotspot QR Code Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/ip hotspot profile\n';
          entries.forEach((params, index) => {
            const ssid = params.ssid || `MyHotspot${index + 1}`;
            const password = params.password || 'pass123';
            script += `# Add Hotspot profile: profile${index + 1}\n`;
            script += `add name=profile${index + 1} login-by=http-pap,http-chap hotspot-address=192.168.${index + 1}.1 comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'wireless-optimization': {
        description: 'تحسين إعدادات الواي فاي',
        inputs: [
          { id: 'channel', label: 'القناة', placeholder: '6' },
          { id: 'band', label: 'النطاق', placeholder: '2.4ghz' },
          { id: 'interface', label: 'الواجهة', placeholder: 'wlan1' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# Wireless Optimization Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/interface wireless\n';
          entries.forEach((params, index) => {
            const channel = params.channel || '6';
            const band = params.band || '2.4ghz';
            const interface = params.interface || `wlan${index + 1}`;
            script += `# Optimize wireless interface: ${interface}\n`;
            script += `set ${interface} channel=${channel} band=${band} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'capsman': {
        description: 'إعداد CAPsMAN لإدارة نقاط الوصول',
        inputs: [
          { id: 'name', label: 'اسم CAPsMAN', placeholder: 'capsman1' },
          { id: 'interface', label: 'الواجهة', placeholder: 'wlan1' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# CAPsMAN Setup Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/caps-man manager\n';
          script += '# Enable CAPsMAN\n';
          script += `set enabled=yes comment="Generated by Dr. Net"\n`;
          script += '/caps-man configuration\n';
          entries.forEach((params, index) => {
            const name = params.name || `capsman${index + 1}`;
            const interface = params.interface || `wlan${index + 1}`;
            script += `# Add CAPsMAN configuration: ${name}\n`;
            script += `add name=${name} ssid=${name} interfaces=${interface} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'static-routing': {
        description: 'إعداد توجيه ثابت',
        inputs: [
          { id: 'dst', label: 'عنوان الوجهة', placeholder: '192.168.2.0/24' },
          { id: 'gateway', label: 'البوابة', placeholder: '192.168.1.1' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# Static Routing Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/ip route\n';
          entries.forEach((params, index) => {
            const dst = params.dst || `192.168.${index + 2}.0/24`;
            const gateway = params.gateway || `192.168.1.1`;
            script += `# Add static route for: ${dst}\n`;
            script += `add dst-address=${dst} gateway=${gateway} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'ospf': {
        description: 'إعداد بروتوكول OSPF',
        inputs: [
          { id: 'area', label: 'معرف المنطقة', placeholder: '0.0.0.0' },
          { id: 'interface', label: 'الواجهة', placeholder: 'ether1' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# OSPF Setup Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/routing ospf instance\n';
          script += '# Configure OSPF instance\n';
          script += `set [find default=yes] router-id=0.0.0.0 comment="Generated by Dr. Net"\n`;
          script += '/routing ospf interface\n';
          entries.forEach((params, index) => {
            const interface = params.interface || `ether${index + 1}`;
            script += `# Add OSPF interface: ${interface}\n`;
            script += `add interface=${interface} comment="Generated by Dr. Net"\n`;
          });
          script += '/routing ospf area\n';
          entries.forEach((params, index) => {
            const area = params.area || '0.0.0.0';
            script += `# Add OSPF area: area${index + 1}\n`;
            script += `add area-id=${area} name=area${index + 1} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'ipsec': {
        description: 'إعداد IPsec للتشفير',
        inputs: [
          { id: 'peer', label: 'عنوان Peer', placeholder: '192.168.1.2' },
          { id: 'secret', label: 'مفتاح مشترك', placeholder: 'mysecret' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# IPsec Setup Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/ip ipsec peer\n';
          entries.forEach((params, index) => {
            const peer = params.peer || `192.168.1.${index + 2}`;
            const secret = params.secret || 'mysecret';
            script += `# Add IPsec peer: ${peer}\n`;
            script += `add address=${peer} secret=${secret} comment="Generated by Dr. Net"\n`;
          });
          script += '/ip ipsec policy\n';
          entries.forEach((params, index) => {
            script += `# Add IPsec policy\n`;
            script += `add src-address=0.0.0.0/0 dst-address=0.0.0.0/0 action=encrypt comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'pppoe-server': {
        description: 'إعداد خادم PPPoE',
        inputs: [
          { id: 'interface', label: 'الواجهة', placeholder: 'ether2' },
          { id: 'user', label: 'اسم المستخدم', placeholder: 'user1' },
          { id: 'pass', label: 'كلمة المرور', placeholder: 'pass123' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# PPPoE Server Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/ppp profile\n';
          script += '# Add PPPoE profile\n';
          script += `add name=pppoe-profile comment="Generated by Dr. Net"\n`;
          script += '/interface pppoe-server server\n';
          entries.forEach((params, index) => {
            const interface = params.interface || `ether${index + 2}`;
            script += `# Add PPPoE server: pppoe${index + 1}\n`;
            script += `add service-name=pppoe${index + 1} interface=${interface} profile=pppoe-profile comment="Generated by Dr. Net"\n`;
          });
          script += '/ppp secret\n';
          entries.forEach((params, index) => {
            const user = params.user || `user${index + 1}`;
            const pass = params.pass || 'pass123';
            script += `# Add PPPoE user: ${user}\n`;
            script += `add name=${user} password=${pass} service=pppoe comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'pppoe-client': {
        description: 'إعداد عميل PPPoE',
        inputs: [
          { id: 'interface', label: 'الواجهة', placeholder: 'ether1' },
          { id: 'user', label: 'اسم المستخدم', placeholder: 'user1' },
          { id: 'pass', label: 'كلمة المرور', placeholder: 'pass123' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# PPPoE Client Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/interface pppoe-client\n';
          entries.forEach((params, index) => {
            const interface = params.interface || `ether${index + 1}`;
            const user = params.user || `user${index + 1}`;
            const pass = params.pass || 'pass123';
            script += `# Add PPPoE client: pppoe${index + 1}\n`;
            script += `add interface=${interface} user=${user} password=${pass} name=pppoe${index + 1} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'vrrp': {
        description: 'إعداد VRRP للتكرار',
        inputs: [
          { id: 'interface', label: 'الواجهة', placeholder: 'ether1' },
          { id: 'virtualIp', label: 'عنوان IP افتراضي', placeholder: '192.168.1.254' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# VRRP Setup Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/interface vrrp\n';
          entries.forEach((params, index) => {
            const interface = params.interface || `ether${index + 1}`;
            const virtualIp = params.virtualIp || `192.168.1.${254 - index}`;
            script += `# Add VRRP instance: vrrp${index + 1}\n`;
            script += `add interface=${interface} vrid=${index + 1} virtual-router-ip=${virtualIp} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'traffic-monitor': {
        description: 'مراقبة الحركة المرورية',
        inputs: [
          { id: 'interface', label: 'الواجهة', placeholder: 'ether1' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# Traffic Monitor Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/tool traffic-monitor\n';
          entries.forEach((params, index) => {
            const interface = params.interface || `ether${index + 1}`;
            script += `# Add traffic monitor: monitor${index + 1}\n`;
            script += `add interface=${interface} name=monitor${index + 1} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'port-knocking': {
        description: 'إعداد Port Knocking للأمان',
        inputs: [
          { id: 'port', label: 'المنفذ', placeholder: '12345' },
          { id: 'protocol', label: 'البروتوكول', placeholder: 'tcp' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# Port Knocking Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/ip firewall filter\n';
          entries.forEach((params, index) => {
            const port = params.port || `123${index + 45}`;
            const protocol = params.protocol || 'tcp';
            script += `# Add port knocking rule for port: ${port}\n`;
            script += `add chain=input protocol=${protocol} dst-port=${port} action=add-src-to-address-list address-list=allowed comment="Port Knocking ${port} - Dr. Net"\n`;
          });
          return script;
        }
      },
      'ipv6-addressing': {
        description: 'إعداد عناوين IPv6',
        inputs: [
          { id: 'interface', label: 'الواجهة', placeholder: 'ether1' },
          { id: 'address', label: 'عنوان IPv6', placeholder: '2001:db8::1/64' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# IPv6 Addressing Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/ipv6 address\n';
          entries.forEach((params, index) => {
            const interface = params.interface || `ether${index + 1}`;
            const address = params.address || `2001:db8::${index + 1}/64`;
            script += `# Add IPv6 address: ${address}\n`;
            script += `add address=${address} interface=${interface} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'dhcpv6': {
        description: 'إعداد خادم DHCPv6',
        inputs: [
          { id: 'interface', label: 'الواجهة', placeholder: 'ether1' },
          { id: 'pool', label: 'نطاق IPv6', placeholder: '2001:db8::/64' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# DHCPv6 Server Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/ipv6 pool\n';
          entries.forEach((params, index) => {
            const pool = params.pool || `2001:db8::${index}/64`;
            script += `# Add IPv6 pool: pool${index + 1}\n`;
            script += `add name=pool${index + 1} prefix=${pool} comment="Generated by Dr. Net"\n`;
          });
          script += '/ipv6 dhcp-server\n';
          entries.forEach((params, index) => {
            const interface = params.interface || `ether${index + 1}`;
            script += `# Add DHCPv6 server: dhcpv6${index + 1}\n`;
            script += `add name=dhcpv6${index + 1} interface=${interface} address-pool=pool${index + 1} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'scheduled-script': {
        description: 'إعداد سكربت مجدول',
        inputs: [
          { id: 'name', label: 'اسم السكربت', placeholder: 'script1' },
          { id: 'interval', label: 'الفاصل الزمني', placeholder: '1h' },
          { id: 'command', label: 'الأمر', placeholder: '/system reboot' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# Scheduled Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/system scheduler\n';
          entries.forEach((params, index) => {
            const name = params.name || `script${index + 1}`;
            const interval = params.interval || '1h';
            const command = params.command || '/system reboot';
            script += `# Add scheduled script: ${name}\n`;
            script += `add name=${name} interval=${interval} on-event="${command}" comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'backup-script': {
        description: 'سكربت النسخ الاحتياطي',
        inputs: [
          { id: 'name', label: 'اسم النسخة الاحتياطية', placeholder: 'backup1' }
        ],
        repeatable: true,
        script: function(entries) {
          let script = '# Backup Script - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += '/system backup\n';
          entries.forEach((params, index) => {
            const name = params.name || `backup${index + 1}`;
            script += `# Create backup: ${name}\n`;
            script += `save name=${name} comment="Generated by Dr. Net"\n`;
          });
          return script;
        }
      },
      'general': {
        description: 'إجابة عامة لأسئلة MikroTik',
        inputs: [
          { id: 'question', label: 'السؤال', placeholder: 'مثال: كيف أضبط VLAN؟' }
        ],
        repeatable: false,
        script: function(params) {
          const question = params.question || '';
          let script = '# General MikroTik Query - Generated by Dr. Net\n';
          script += '# Author: مصطفى عاطف الشوري\n';
          script += `إجابة من دكتور نت لسؤالك: ${question}\n`;
          script += `# Example response for common queries\n`;
          script += `مثال: لإعداد VLAN، استخدم الأمر: /interface vlan add name=vlan10 vlan-id=10 interface=ether1 comment="Generated by Dr. Net"\n`;
          return script;
        }
      }
    };

    const toolSelect = document.getElementById('tool');
    const inputsDiv = document.getElementById('inputs');
    const submitButton = document.getElementById('submit');
    const errorText = document.getElementById('error');
    const answerDiv = document.getElementById('answer');
    const answerText = document.getElementById('answer-text');
    const copyButton = document.getElementById('copy');

    function renderInputs(tool) {
      inputsDiv.innerHTML = '';
      const data = toolsDatabase[tool];
      if (data && data.inputs) {
        const groupDiv = document.createElement('div');
        groupDiv.className = 'input-group';
        groupDiv.id = `input-group-0`;
        data.inputs.forEach(input => {
          const label = document.createElement('label');
          label.textContent = input.label;
          const inputElement = document.createElement('input');
          inputElement.type = 'text';
          inputElement.id = `${input.id}-0`;
          inputElement.placeholder = input.placeholder;
          groupDiv.appendChild(label);
          groupDiv.appendChild(inputElement);
        });
        if (data.repeatable) {
          const removeBtn = document.createElement('button');
          removeBtn.className = 'remove-btn';
          removeBtn.textContent = 'إزالة';
          removeBtn.style.display = 'none';
          removeBtn.onclick = () => groupDiv.remove();
          groupDiv.appendChild(removeBtn);
        }
        inputsDiv.appendChild(groupDiv);

        if (data.repeatable) {
          const addBtn = document.createElement('button');
          addBtn.className = 'add-btn';
          addBtn.textContent = 'إضافة خط';
          addBtn.onclick = () => {
            const index = inputsDiv.querySelectorAll('.input-group').length;
            const newGroup = document.createElement('div');
            newGroup.className = 'input-group';
            newGroup.id = `input-group-${index}`;
            data.inputs.forEach(input => {
              const label = document.createElement('label');
              label.textContent = input.label;
              const inputElement = document.createElement('input');
              inputElement.type = 'text';
              inputElement.id = `${input.id}-${index}`;
              inputElement.placeholder = input.placeholder;
              newGroup.appendChild(label);
              newGroup.appendChild(inputElement);
            });
            const removeBtn = document.createElement('button');
            removeBtn.className = 'remove-btn';
            removeBtn.textContent = 'إزالة';
            removeBtn.onclick = () => newGroup.remove();
            newGroup.appendChild(removeBtn);
            inputsDiv.appendChild(newGroup);
          };
          inputsDiv.appendChild(addBtn);
        }
      }
    }

    toolSelect.addEventListener('change', () => {
      renderInputs(toolSelect.value);
    });

    function handleSubmit() {
      const tool = toolSelect.value;
      console.log('Tool selected:', tool);

      const data = toolsDatabase[tool];
      if (!data) {
        errorText.textContent = 'الأداة غير موجودة';
        errorText.style.display = 'block';
        console.error('Error: Tool not found');
        return;
      }

      let entries = [];
      if (data.inputs) {
        if (data.repeatable) {
          const groups = inputsDiv.querySelectorAll('.input-group');
          if (groups.length === 0) {
            errorText.textContent = 'يرجى إضافة خط واحد على الأقل';
            errorText.style.display = 'block';
            console.error('Error: No input groups');
            return;
          }
          groups.forEach((group, index) => {
            const params = {};
            data.inputs.forEach(input => {
              const value = document.getElementById(`${input.id}-${index}`)?.value.trim();
              if (!value && tool !== 'general') {
                errorText.textContent = `يرجى ملء حقل ${input.label} في الخط ${index + 1}`;
                errorText.style.display = 'block';
                console.error(`Error: Missing input for ${input.id}-${index}`);
                return;
              }
              params[input.id] = value;
            });
            entries.push(params);
          });
        } else {
          const params = {};
          data.inputs.forEach(input => {
            const value = document.getElementById(`${input.id}-0`)?.value.trim();
            if (!value && tool !== 'general') {
              errorText.textContent = `يرجى ملء حقل ${input.label}`;
              errorText.style.display = 'block';
              console.error(`Error: Missing input for ${input.id}`);
              return;
            }
            params[input.id] = value;
          });
          entries = [params];
        }
      }

      errorText.style.display = 'none';
      submitButton.disabled = true;
      submitButton.textContent = 'جارٍ المعالجة...';
      answerDiv.style.display = 'none';

      try {
        const response = data.repeatable ? data.script(entries) : data.script(entries[0]);
        console.log('Response generated:', response);
        answerText.value = response;
        answerDiv.style.display = 'block';
      } catch (error) {
        errorText.textContent = 'حدث خطأ أثناء معالجة الطلب';
        errorText.style.display = 'block';
        console.error('Error:', error.message);
      } finally {
        submitButton.disabled = false;
        submitButton.textContent = 'إنشاء السكربت';
      }
    }

    submitButton.addEventListener('click', handleSubmit);
    submitButton.addEventListener('touchstart', (e) => {
      e.preventDefault();
      handleSubmit();
    });

    copyButton.addEventListener('click', () => {
      answerText.select();
      try {
        navigator.clipboard.writeText(answerText.value);
        copyButton.textContent = 'تم النسخ!';
        setTimeout(() => {
          copyButton.textContent = 'نسخ السكربت';
        }, 2000);
      } catch (error) {
        errorText.textContent = 'فشل النسخ. حاول يدويًا.';
        errorText.style.display = 'block';
        console.error('Copy error:', error.message);
      }
    });
    copyButton.addEventListener('touchstart', (e) => {
      e.preventDefault();
      answerText.select();
      try {
        navigator.clipboard.writeText(answerText.value);
        copyButton.textContent = 'تم النسخ!';
        setTimeout(() => {
          copyButton.textContent = 'نسخ السكربت';
        }, 2000);
      } catch (error) {
        errorText.textContent = 'فشل النسخ. حاول يدويًا.';
        errorText.style.display = 'block';
        console.error('Copy error:', error.message);
      }
    });

    renderInputs(toolSelect.value);
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'93a54465fe0c672b',t:'MTc0NjMzMzA3Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script>
</body>
</html>