<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>دكتور نت - أدوات مايكروتيك</title>
<meta name="description" content="دكتور نت - منصة متكاملة لأدوات MikroTik مع شرح تفصيلي وتصميم عصري وتجربة مستخدم مميزة." />
<meta name="author" content="مصطفى عاطف الشوري" />
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
<style>
  /* تصميم عصري */
  *, *::before, *::after { box-sizing: border-box; }
  body {
    margin:0; padding:0;
    font-family: 'Cairo', sans-serif;
    background: linear-gradient(135deg,#001f4d,#004aad);
    color: #222;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  #wrap {
    max-width: 1000px;
    width: 95%;
    background: #fff;
    border-radius: 20px;
    box-shadow: 0 15px 40px rgba(0,0,0,0.3);
    padding: 40px 50px 80px;
    margin: 40px 0;
  }
  header {
    text-align: center;
    margin-bottom: 30px;
  }
  .logo-img {
    width: 160px;
    height: 160px;
    border-radius: 50%;
    border: 6px solid #004aad;
    box-shadow: 0 0 25px #0073e6;
    transition: transform 0.3s ease;
  }
  .logo-img:hover {
    transform: rotate(15deg);
  }
  h1 {
    font-size: 2.8rem;
    color: #004aad;
    margin-top: 20px;
    font-weight: 700;
    letter-spacing: 2px;
  }
  .warning-message {
    background: #fff3cd;
    color: #856404;
    padding: 18px 25px;
    border-radius: 15px;
    font-weight: 700;
    margin-bottom: 35px;
    border: 1px solid #ffeeba;
    box-shadow: 0 3px 15px rgba(255,193,7,0.4);
    text-align: center;
  }
  label {
    font-weight: 700;
    font-size: 1.2rem;
    color: #004aad;
    display: block;
    margin-bottom: 10px;
  }
  select, input[type=text], textarea {
    width: 100%;
    padding: 15px 20px;
    margin-bottom: 25px;
    border: 3px solid #004aad;
    border-radius: 15px;
    font-size: 1.1rem;
    background: #eaf4ff;
    outline: none;
    box-shadow: inset 0 0 10px #cce5ff;
  }
  select:hover, select:focus, input[type=text]:focus, textarea:focus {
    background: #d1e7ff;
  }
  button {
    width: 100%;
    padding: 18px;
    font-size: 1.3rem;
    font-weight: 800;
    border: none;
    border-radius: 20px;
    background: #004aad;
    color: #fff;
    cursor: pointer;
    box-shadow: 0 8px 24px rgba(0,67,173,0.8);
    user-select: none;
  }
  button:hover:not(:disabled) {
    background: #002e6d;
    box-shadow: 0 10px 30px rgba(0,48,135,0.9);
  }
  button:disabled {
    background: #ccc !important;
    cursor: not-allowed;
    box-shadow: none !important;
  }
  #answer-text {
    width: 100%;
    font-family: Consolas, monospace;
    font-size: 15px;
    line-height: 1.6;
    padding: 25px;
    border-radius: 20px;
    border: 3px solid #004aad;
    background: #f0f8ff;
    min-height: 320px;
    white-space: pre-wrap;
    overflow-y: auto;
    box-shadow: inset 0 0 15px #cce5ff;
  }
  #answer {
    margin-top: 40px;
    position: relative;
    display: none;
  }
  #copy {
    position: absolute;
    top: 15px;
    right: 15px;
    background: #28a745;
    border: none;
    color: #fff;
    padding: 12px 25px;
    border-radius: 50px;
    cursor: pointer;
    font-weight: 700;
    box-shadow: 0 8px 24px rgba(40,167,69,0.8);
    transition: background 0.3s ease;
  }
  #copy:hover {
    background: #1e7e34;
  }
  #error {
    color: #dc3545;
    font-weight: 700;
    margin: 20px 0;
    text-align: center;
    display: none;
    font-size: 1.1rem;
  }
  footer.disclaimer, footer.footer {
    text-align: center;
    color: #fff;
    font-weight: 700;
    margin-top: 50px;
    user-select: none;
  }
  footer.footer {
    margin-bottom: 30px;
    font-weight: 500;
    font-size: 1rem;
  }
  .support-floating {
    position: fixed;
    bottom: 25px;
    left: 25px;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    gap: 18px;
  }
  .support-btn, .booking-btn {
    display: flex;
    align-items: center;
    gap: 15px;
    background-color: #004aad;
    color: white;
    border-radius: 50px;
    padding: 16px 30px;
    font-weight: 700;
    font-size: 18px;
    box-shadow: 0 8px 28px rgba(0,67,173,0.85);
    cursor: pointer;
    user-select: none;
    border: none;
  }
  .support-btn:hover, .booking-btn:hover {
    background-color: #002e6d;
    box-shadow: 0 10px 35px rgba(0,48,135,0.95);
  }
  .support-btn i, .booking-btn i {
    font-size: 24px;
  }
  @media (max-width: 768px) {
    #wrap {
      padding: 30px 20px 70px 20px;
    }
    .logo-img {
      width: 130px;
      height: 130px;
    }
    button, select, input[type=text], textarea {
      font-size: 1.1rem;
      padding: 14px 18px;
    }
    #answer-text {
      min-height: 260px;
    }
    .support-btn, .booking-btn {
      padding: 14px 24px;
      font-size: 16px;
    }
  }
  @media (max-width: 480px) {
    .logo-img {
      width: 110px;
      height: 110px;
    }
    #answer-text {
      min-height: 200px;
    }
    .support-floating {
      bottom: 15px;
      left: 15px;
      gap: 12px;
    }
    .support-btn, .booking-btn {
      font-size: 14px;
      padding: 12px 20px;
    }
  }
</style>
</head>
<body>
<div id="wrap" role="main" aria-label="موقع أدوات مايكروتيك دكتور نت">
  <header>
    <img src="https://i.imgur.com/0PBLMuU.jpeg" alt="شعار أدوات مايكروتيك دكتور نت" class="logo-img" loading="lazy" />
    <h1>دكتور نت - أدوات مايكروتيك</h1>
  </header>

  <div class="warning-message" role="alert" aria-live="polite">
    <strong>تنبيه مهم:</strong> دكتور نت غير مسؤول عن أي أضرار ناتجة عن الاستخدام الخاطئ لهذه الأدوات. يرجى مراجعة السكربتات بعناية قبل التطبيق.
  </div>

  <section id="tool-section">
    <label for="tool">اختر الأداة:</label>
    <select id="tool" aria-describedby="tool-desc" aria-required="true">
      <option value="" disabled selected>-- اختر أداة --</option>
      <option value="simple-queue">مولد Simple Queue</option>
      <option value="queue-tree">مولد Queue Tree</option>
      <option value="pcq">مولد PCQ</option>
      <option value="load-balancing-pcc">موازنة الحمل PCC</option>
      <option value="load-balancing-ecmp">موازنة الحمل ECMP</option>
      <option value="vpn-pptp">نفق VPN PPTP</option>
      <option value="vpn-l2tp">نفق VPN L2TP</option>
      <option value="vpn-openvpn">نفق VPN OpenVPN</option>
      <option value="firewall-basic">جدار حماية أساسي</option>
      <option value="firewall-advanced">جدار حماية متقدم</option>
      <option value="dhcp-server">خادم DHCP</option>
      <option value="hotspot-setup">إعداد Hotspot</option>
      <option value="capsman">إعداد CAPsMAN</option>
      <option value="ipsec">إعداد IPsec</option>
      <option value="pppoe-server">خادم PPPoE</option>
      <option value="pppoe-client">عميل PPPoE</option>
      <option value="vrrp">إعداد VRRP</option>
      <option value="traffic-monitor">مراقبة الحركة</option>
      <option value="port-knocking">Port Knocking</option>
      <option value="ipv6-addressing">عناوين IPv6</option>
      <option value="dhcpv6">خادم DHCPv6</option>
      <option value="scheduled-script">سكربت مجدول</option>
      <option value="backup-script">سكربت النسخ الاحتياطي</option>
      <option value="general">سؤال عام</option>
    </select>
    <p id="tool-desc" style="min-height: 60px; margin-top: 10px; color: #004aad; font-weight: 700;"></p>
  </section>

  <form id="tool-form" novalidate>
    <div id="inputs"></div>
    <button id="submit" disabled>إنشاء السكربت</button>
  </form>

  <section id="answer" aria-label="السكريبت الناتج" style="display:none; position: relative; margin-top: 40px;">
    <textarea id="answer-text" readonly aria-readonly="true" aria-label="نص السكربت الناتج"></textarea>
    <button id="copy" aria-label="نسخ السكربت" title="نسخ السكربت"><i class="fas fa-copy"></i> نسخ السكربت</button>
  </section>

  <footer class="disclaimer">
    جميع الحقوق محفوظة لـ مصطفى عاطف الشوري برعاية سيستم سمارت راديوس © 2025
  </footer>
  <footer class="footer">
    تم تطوير الموقع لدعم مجتمع MikroTik بأفضل الأدوات والسكربتات.
  </footer>
</div>

<div class="support-floating" aria-label="التواصل والدعم الفني">
  <button class="support-btn" id="supportBtn" aria-haspopup="dialog" aria-controls="supportModal" title="الدعم الفني المباشر">
    <i class="fas fa-headset"></i> دعم فني مباشر
  </button>
  <a href="https://mostfaf.github.io/Doctor-net/" target="_blank" rel="noopener" class="booking-btn" title="حجز موعد للدعم الفني">
    <i class="fas fa-calendar-check"></i> حجز موعد
  </a>
</div>

<dialog id="supportModal" aria-modal="true" role="dialog" aria-labelledby="supportTitle" aria-describedby="supportDesc">
  <h2 id="supportTitle">الدعم الفني المباشر</h2>
  <p id="supportDesc">يمكنك التواصل معنا مباشرة عبر الدردشة أو الفيديو لطلب الدعم الفني.</p>
  <div id="supportChat" style="height:300px; background:#f0f0f0; border-radius:8px; overflow-y:auto; padding:10px; font-family: monospace; font-size:14px;">
    <p><em>جاري تفعيل نظام الدعم الفني...</em></p>
  </div>
  <button id="closeSupport" aria-label="إغلاق الدعم الفني" style="margin-top:15px; padding:10px 20px; background:#004aad; color:#fff; border:none; border-radius:8px; cursor:pointer;">إغلاق</button>
</dialog>

<script>
const toolsDatabase = {
  'simple-queue': {
    description: 'مولد Simple Queue لتحديد سرعة العملاء. يسمح لك بتحديد حد أقصى للسرعة لكل IP أو عميل.',
    inputs: [
      { id: 'ip', label: 'عنوان IP', placeholder: 'مثال: 192.168.1.10', type: 'text' },
      { id: 'speed', label: 'السرعة (تحميل/رفع)', placeholder: 'مثال: 5M/5M', type: 'text' },
      { id: 'name', label: 'اسم العميل', placeholder: 'مثال: client1', type: 'text' }
    ],
    repeatable: true,
    script(entries) {
      let script = '# Simple Queue Script\n# إعداد بواسطة مصطفى عاطف الشوري\n/queue simple\n';
      entries.forEach((e,i) => {
        const ip = e.ip || `192.168.1.${i+10}`;
        const speed = e.speed || '2M/2M';
        const name = e.name || `client${i+1}`;
        script += `add name=${name} target=${ip}/32 max-limit=${speed} comment="Generated by Dr. Net"\n`;
      });
      return script;
    }
  },
  // (أكمل بقية الأدوات بنفس النمط مع شرح واضح لكل أداة)
  'general': {
    description: 'سؤال عام أو طلب خاص، يمكن كتابته هنا.',
    inputs: [
      { id: 'question', label: 'اكتب سؤالك أو طلبك هنا', placeholder: 'مثال: كيف أضيف قاعدة في الجدار الناري؟', type: 'textarea' }
    ],
    repeatable: false,
    script(entries) {
      return `# سؤال عام من المستخدم:\n# ${entries[0].question || ''}\n# يرجى التواصل مع الدعم الفني للمساعدة.\n`;
    }
  }
};

const toolSelect = document.getElementById('tool');
const toolDesc = document.getElementById('tool-desc');
const inputsDiv = document.getElementById('inputs');
const submitBtn = document.getElementById('submit');
const errorP = document.getElementById('error');
const answerDiv = document.getElementById('answer');
const answerText = document.getElementById('answer-text');
const copyBtn = document.getElementById('copy');

const supportBtn = document.getElementById('supportBtn');
const supportModal = document.getElementById('supportModal');
const closeSupportBtn = document.getElementById('closeSupport');
const supportChat = document.getElementById('supportChat');

let currentTool = null;
let repeatableCount = 1;

function createInputField(input, repeatIndex) {
  const wrapper = document.createElement('div');
  wrapper.className = 'input-group';
  wrapper.style.marginBottom = '15px';

  const label = document.createElement('label');
  label.htmlFor = `${input.id}-${repeatIndex}`;
  label.textContent = input.label;
  wrapper.appendChild(label);

  let inputElement;
  if (input.type === 'textarea') {
    inputElement = document.createElement('textarea');
    inputElement.rows = 3;
  } else {
    inputElement = document.createElement('input');
    inputElement.type = input.type || 'text';
  }
  inputElement.id = `${input.id}-${repeatIndex}`;
  inputElement.name = input.id;
  inputElement.placeholder = input.placeholder || '';
  inputElement.setAttribute('aria-label', input.label);
  inputElement.required = true;
  inputElement.style.width = '100%';
  inputElement.style.padding = '10px';
  inputElement.style.borderRadius = '8px';
  inputElement.style.border = '1px solid #ccc';
  inputElement.style.fontSize = '15px';
  wrapper.appendChild(inputElement);

  return wrapper;
}

function clearInputs() {
  inputsDiv.innerHTML = '';
  errorP.style.display = 'none';
  answerDiv.style.display = 'none';
  submitBtn.disabled = true;
  repeatableCount = 1;
}

function addRepeatableInputs() {
  const groupWrapper = document.createElement('fieldset');
  groupWrapper.style.border = '1.5px dashed #ccc';
  groupWrapper.style.padding = '15px 20px';
  groupWrapper.style.marginBottom = '15px';
  groupWrapper.style.borderRadius = '10px';
  groupWrapper.setAttribute('aria-label', `مجموعة مدخلات رقم ${repeatableCount}`);

  const legend = document.createElement('legend');
  legend.textContent = `المدخل رقم ${repeatableCount}`;
  legend.style.fontWeight = '700';
  legend.style.color = '#004aad';
  groupWrapper.appendChild(legend);

  currentTool.inputs.forEach((input) => {
    groupWrapper.appendChild(createInputField(input, repeatableCount));
  });

  if (repeatableCount > 1) {
    const removeBtn = document.createElement('button');
    removeBtn.type = 'button';
    removeBtn.className = 'remove-btn';
    removeBtn.textContent = 'حذف هذه المجموعة -';
    removeBtn.style.backgroundColor = '#dc3545';
    removeBtn.style.color = 'white';
    removeBtn.style.border = 'none';
    removeBtn.style.padding = '8px 15px';
    removeBtn.style.borderRadius = '8px';
    removeBtn.style.cursor = 'pointer';
    removeBtn.style.fontWeight = '600';
    removeBtn.style.marginTop = '10px';
    removeBtn.addEventListener('click', () => {
      groupWrapper.remove();
      repeatableCount--;
      const fieldsets = inputsDiv.querySelectorAll('fieldset');
      fieldsets.forEach((fs, i) => {
        fs.querySelector('legend').textContent = `المدخل رقم ${i + 1}`;
      });
    });
    groupWrapper.appendChild(removeBtn);
  }

  const addBtn = inputsDiv.querySelector('button.add-btn');
  if (addBtn) {
    inputsDiv.insertBefore(groupWrapper, addBtn);
  } else {
    inputsDiv.appendChild(groupWrapper);
  }
}

function buildInputs(toolKey) {
  clearInputs();
  if (!toolKey || !toolsDatabase[toolKey]) return;

  currentTool = toolsDatabase[toolKey];
  toolDesc.textContent = currentTool.description || '';

  if (currentTool.repeatable) {
    addRepeatableInputs();
    const addBtn = document.createElement('button');
    addBtn.type = 'button';
    addBtn.className = 'add-btn';
    addBtn.textContent = 'إضافة مدخل جديد +';
    addBtn.style.backgroundColor = '#28a745';
    addBtn.style.color = 'white';
    addBtn.style.border = 'none';
    addBtn.style.padding = '10px 20px';
    addBtn.style.borderRadius = '8px';
    addBtn.style.cursor = 'pointer';
    addBtn.style.fontWeight = '600';
    addBtn.style.marginTop = '10px';
    addBtn.addEventListener('click', () => {
      repeatableCount++;
      addRepeatableInputs();
    });
    inputsDiv.appendChild(addBtn);
  } else {
    currentTool.inputs.forEach(input => {
      inputsDiv.appendChild(createInputField(input, 0));
    });
  }
  submitBtn.disabled = false;
}

function collectInputs() {
  if (!currentTool) return [];
  let entries = [];
  if (currentTool.repeatable) {
    const fieldsets = inputsDiv.querySelectorAll('fieldset');
    fieldsets.forEach(fs => {
      let entry = {};
      currentTool.inputs.forEach(input => {
        const el = fs.querySelector(`#${input.id}-${fieldsets.length > 1 ? fs.querySelector('legend').textContent.match(/\d+/)[0] : 1}`);
        if (el) entry[input.id] = el.value.trim();
      });
      entries.push(entry);
    });
  } else {
    let entry = {};
    currentTool.inputs.forEach(input => {
      const el = inputsDiv.querySelector(`#${input.id}-0`);
      if (el) entry[input.id] = el.value.trim();
    });
    entries.push(entry);
  }
  return entries;
}

function validateInputs(entries) {
  for (const entry of entries) {
    for (const key in entry) {
      if (!entry[key]) {
        return `الرجاء تعبئة الحقل "${key}" في جميع المجموعات.`;
      }
    }
  }
  return '';
}

function generateScript() {
  errorP.style.display = 'none';
  answerDiv.style.display = 'none';
  answerText.value = '';

  const entries = collectInputs();
  const validationError = validateInputs(entries);
  if (validationError) {
    errorP.textContent = validationError;
    errorP.style.display = 'block';
    return;
  }

  try {
    const script = currentTool.script(entries);
    answerText.value = script;
    answerDiv.style.display = 'block';
    errorP.style.display = 'none';
  } catch (e) {
    errorP.textContent = 'حدث خطأ أثناء إنشاء السكربت. يرجى المحاولة مرة أخرى.';
    errorP.style.display = 'block';
    console.error(e);
  }
}

copyBtn.addEventListener('click', () => {
  answerText.select();
  answerText.setSelectionRange(0, 99999);
  navigator.clipboard.writeText(answerText.value).then(() => {
    alert('تم نسخ السكربت إلى الحافظة!');
  }).catch(() => {
    alert('فشل النسخ. يرجى النسخ يدوياً.');
  });
});

toolSelect.addEventListener('change', () => {
  buildInputs(toolSelect.value);
});

submitBtn.addEventListener('click', e => {
  e.preventDefault();
  generateScript();
});

supportBtn.addEventListener('click', () => {
  supportModal.showModal();
  supportChat.innerHTML = '<p>جاري تفعيل نظام الدعم الفني المباشر...</p>';
  setTimeout(() => {
    supportChat.innerHTML = '<p><strong>مرحباً! كيف يمكننا مساعدتك اليوم؟</strong></p>';
  }, 1500);
});

closeSupportBtn.addEventListener('click', () => {
  supportModal.close();
});

supportModal.addEventListener('click', event => {
  const rect = supportModal.getBoundingClientRect();
  if (
    event.clientX < rect.left ||
    event.clientX > rect.right ||
    event.clientY < rect.top ||
    event.clientY > rect.bottom
  ) {
    supportModal.close();
  }
});

submitBtn.disabled = true;
</script>
</body>
</html>
